<!DOCTYPE html>
<html>
<head>
    <title>Synthwave reddit</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body class = "base">
    <script type="text/javascript">
        jQuery(document).ready(function($) {
          $(window).on('load', function() {
            setTimeout(function() {
              $('#preloader').fadeOut('slow', function() {});
            }, 2000);

          });
        });
        fetch('https://www.reddit.com/top.json')
            .then(response => response.json())
            .then(dataBase => {
                dataBase = dataBase['data']['children']
                console.log(dataBase)
                dataBase.reduce((preb, post) => {
                    var div = document.createElement('div');
                    div.className = "stBack";
                    let img = "<img src =" + (post['data']['thumbnail']=='default'? 'img/blank.jpg': post['data']['thumbnail']) + '>'
                    div.innerHTML = '<div class="formatImg">' + img + '</div>'+ '<a href="https://www.reddit.com/' + post['data']['permalink'] + '">' + post['data']['title'] + '</a>';
                    document.getElementById("center").appendChild(div);
                })
            })
        var timeout;
        document.onmousemove = function(){
            clearTimeout(timeout);
            timeout = setTimeout(function(){window.location.reload(false);}, 10000)
        }
    </script>
    <div id="preloader"></div>
    <div class="mainBase" id="center">
    </div>
</body>
</html>